---

# **MUEDnote Spotlight Input MVP — 仕様書（ClaudeCode向け）**

## **概要**

MUEDnote を「起動して使うツール」ではなく、
制作作業の最中に **思考の断片（フラグメント）を即座に投入できる常駐型メモシステム** として成立させる。

本MVPでは、**Cmd + Shift + Space** で呼び出される *Spotlight風1行入力バー* を中心機能とする。

---

## **1. 目的**

ユーザーにアプリ起動を意識させず、
**作業中の"思考の流れを中断しないメモ入力"** を実現する。

入力バーは短時間表示・即消滅し、
入力されたテキストは MUEDnote サーバへほぼ生ログとして送信される。

---

## **2. ホットキー仕様**

```
ホットキー: Cmd + Shift + Space
動作: 1行入力バーのポップアップ表示
```

呼び出し後、ユーザーは1文入力して Enter。
送信と同時にバーはフェードアウト。

---

## **3. 入力バー UI仕様**

### 表示位置

* 原則：**カーソル位置の付近（上下 ±16px / 左右 ±24px）**
* 取得不可の場合：**画面中央・やや上にフォールバック**

### サイズ

* 幅: 400〜480px
* 高さ: 36px（1行限定）

### デザイン

* 背景色: #1F1F1F（85%）
* 角丸: 8px
* フォント: システムフォント / 14〜15px
* 境界線: なし（影1段のみ）
* 表示保持時間:

  * 入力中は常時表示
  * 未操作で 5秒経過 → 自動フェードアウト（0.15〜0.25秒）

---

## **4. 入力イベントとAPI通信**

### 送信トリガー

* Enter 押下で送信
* Escape でキャンセルして即消滅

### 送信データのJSON構造

```json
{
  "text": "<入力文字列>",
  "timestamp": 1733120000,
  "contextHint": {
    "activeApp": "Logic Pro",
    "activeProject": "/Users/.../SongA",
    "cursorInfo": "optional"
  }
}
```

### 送信先（仮）

```
POST https://muednote.app/api/logs
```

### レスポンス

* 200 OK → 入力バー即フェードアウト
* エラー時 → 画面右上に5秒の非侵襲トーストで通知（MVPでは簡素に）

---

## **5. 常駐プロセス仕様**

### 挙動

* アプリは macOS のメニューバー常駐型
* 起動時にホットキーを登録
* 入力バー生成以外の処理は極力持たない
* 重い処理（整形・分類・LLM処理）は一切行わない
* CPU / メモリは idle 時ほぼゼロ

### 言語・技術（候補）

* Electron（早期MVP向け）
* Swift / AppKit（最適・軽量）
* Rust + Tauri（中期）

いずれでも仕様は同じ。

---

## **6. セキュリティ・権限**

### macOS アクセス許可（必要最小限）

* ホットキー権限
* 画面描画（アクセシビリティ）
* ネットワーク

ファイルアクセスは要求しない（MVPでは不要）。

---

## **7. バックエンド処理（最低限）**

受け取ったテキストをログストアに保存するだけでよい。

### MVP時点では不要な処理

* LLMによる整形
* セマンティック分類
* 質問生成
* タグ提案
* プロジェクト紐づけ高度化

後で追加可能。

---

## **8. ClaudeCode への直接指示として使える要約**

```
・Cmd+Shift+Space で呼ばれる1行入力バーを作る常駐アプリ
・カーソル位置付近に小型バー（幅400〜480px、高さ36px）を表示
・EnterでAPIへ{text, timestamp, metadata}をPOSTし即フェードアウト
・Escapeでキャンセル
・未操作5秒で自動消滅
・メニューバー常駐、常時軽量
・UIはミニマルで黒系、影のみ、角丸8px
・APIエラー時は簡易トースト表示
```

---
