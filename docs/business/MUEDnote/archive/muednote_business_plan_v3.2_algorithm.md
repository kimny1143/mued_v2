# MUEDnote 事業計画書 (v3.2 - アルゴリズムとプロトコル詳細版)

**バージョン**: 3.2
**作成日**: 2025年11月（v3.1フィードバック反映）
**作成**: 株式会社グラスワークス
**アーカイブ理由**: 歴史的文書。HLAアルゴリズムの詳細設計はv6.1に統合済み。

---

## 1. Human Learning Algorithm (HLA) の分析哲学と構造（核となる競争優位性）

HLA（人間学習アルゴリズム）は、ユーザーの「乱文」を単に分類するのではなく、制作行動の**「癖」「意図」「感情」**という暗黙知を特徴量として抽出し、これを将来の自己学習に利用可能なメタデータ（知的資産）として構造化することを目的とします。

### 1.1 HLA の中核アルゴリズム定義

HLAの処理は、以下の3つの主要なステージで構成されます。

| ステージ | 目的 | 技術的プロセス | LLMの役割 |
|---------|------|---------------|----------|
| Stage 1: Intent Recognition | 乱文から制作の意図（何を対象に、何をしようとしているか）を認識する。 | 自然言語処理（LLM）による名詞句抽出、動詞句のマッピング。 | 乱文を (Target, Action, Qualifier) のタプルに分解。 |
| Stage 2: Feature Extraction | ユーザー固有の言語パターン、感情、作業文脈を特徴量として定量化する。 | 感情分析、DAWコンテキスト（後述）、過去ログの類似性スコアリング。 | 感情トーンのレーティング（1-5）、過去ログとのL2距離計算。 |
| Stage 3: Label Generation | 抽出した特徴量に基づき、再利用可能な「経験則」ラベルを生成する。 | 決定木またはクラスタリング（例: 3日間のログからスランプ前兆ラベルを付与）。 | 特定のパターンに合致した場合のメタデータ（JSON）生成。 |

### 1.2 HLA の特徴量 (Feature) とラベル (Label) の具体例

HLA の核心は、入力された乱文に対して、何を特徴量として抽出し、どのようなラベルを生成するかという「哲学」にあります。

| データ定義 | 特徴量 (Input to HLA) | 抽出されるラベル (Output Metadata) | 応用価値 |
|-----------|----------------------|-----------------------------------|----------|
| 言語パターン | ネガティブ語彙の比率、句読点の使用傾向、特定の専門用語の反復回数。 | #Negative-Spiral（ネガティブ発言の連鎖）、#3kHz-Filter-Fixation（特定の周波数帯の反復言及）。 | スランプの早期警告、制作における「思考の穴」の特定。 |
| 制作文脈 | DAW自動コンテキストID（プロジェクト名、トラック名）、作業開始時刻からの経過時間、直前のログとの時間差。 | #Late-Night-Decision（深夜作業ログ）、#First-1hr-Rush（初期集中ゾーンの行動パターン）。 | 時間帯や疲労度による**判断の質（Quality of Decision）**の分析。 |
| 意図の変遷 | 直前のログの Action と今回の Action の不一致度（例:「ミックス」→「メロディ」）。 | #Context-Jumping（思考の散逸）、#Stuck-in-Loop（同じアクションの繰り返し）。 | 集中力散漫の可視化、ボトルネックの発見。 |

---

## 2. UX憲法「0.5秒の壁」と技術要件の具体化

「0.5秒の壁」は、DAW制作フローの身体性を保証するための絶対的なKPIです。これを達成するための技術的戦略を明確化します。

### 2.1 0.5秒ルールの技術定義とベンチマーク

**定義**: ホットキー押下から、入力ウィジェットが表示され、ユーザーが最初の文字を入力可能になるまでの最大許容時間。

| テストシナリオ | 目標時間 | 必要な技術的対策 |
|---------------|---------|-----------------|
| Cold Start (起動直後) | 1.0秒以内 (初回のみ許容) | アプリ起動時にバックグラウンドでLLM接続を事前確立（Warm-up）。 |
| Warm Start (待機状態) | 0.5秒以内 (通常目標) | LLMリクエストはノンブロッキング、入力UIはネイティブフレームワーク（Electron/Tauri）で最速レンダリング。 |
| CPU 100% / Plugin Scan 時 | 0.8秒以内 | UIプロセスを最優先プロセスとしてOSレベルで固定。DAWの重い処理から隔離。 |
| Rosetta Mode (Mac M1/M2) | 0.6秒以内 | 互換性レイヤーのオーバーヘッドを許容しつつ、ネイティブパフォーマンスを最大化。 |

### 2.2 技術プラットフォーム戦略（速度優先）

1. **デスクトップアプリ**: Webブラウザではなく、Electron/Tauri を使用し、DAWにオーバーレイするネイティブUIを構築。
2. **LLM**: GPT-4o mini や Gemini Flash などの低遅延・高速応答モデルを最優先で採用。応答内容の複雑さ（JSON構造化）を最小限に抑えるプロンプト設計。

---

## 3. DAW連携の現実的な技術アプローチ（裏口戦略）

多くのDAWが公式APIを公開していない現実に基づき、ユーザーに負担をかけず、制作文脈を自動取得するための「裏口」戦略を採用します。

| プロトコル名 | 目的 | 技術的手法 | 難易度 |
|-------------|------|-----------|--------|
| Protocol 1: Window Title / Active Process Monitoring | 現在のプロジェクト名を取得する。 | OSのアクセシビリティAPI（Windows: GetWindowText / macOS: AXUIElement）を使用して、DAWのメインウィンドウタイトルを監視。 | 低-中 |
| Protocol 2: File Path Tracking | プロジェクトファイルのパスと変更時刻を監視する。 | ファイルシステム監視API（fs.watchなど）を使用し、.als, .logicx, .cpr などのプロジェクトファイルへのアクセスを追跡。 | 中 |
| Protocol 3: MIDI / OSC Monitoring | DAWの再生/停止状態やアクティブなトラックの変更を間接的に知る。 | 仮想MIDIポートまたはOSC（Open Sound Control）を介し、DAWからテストデータを送ってもらう、または既存のコントロールサーフェスプロトコルを傍受。 | 高 |
| Protocol 4: Keystroke Context Linking | 直前の制作行動を推定し、ログに紐付ける。 | ホットキー起動前に直前に打たれた数秒間のキーバインド履歴を記録し、DAWの操作を推定（例: CMD+Z後にログ→「取り消し」の文脈）。 | 中-高 |

### 実装フェーズ

- **MVP (Phase 1)**: Protocol 1 & 2 (プロジェクト名とファイルパス) の実装を最優先とし、文脈IDの基本構造を確立する。
- **Expansion (Phase 2)**: Protocol 3 & 4 (MIDI/キーバインド) の実装に進み、より詳細なトラックレベルの文脈取得を目指す。

---

この v3.2 は、MUEDnoteの思想（哲学）と、それを支える技術（プロトコル）、そして核となる**知的財産（HLA）**の構造を一本化し、MVP開発に向けた具体的な指針とします。
