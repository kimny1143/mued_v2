# MUEDnote DAW連携 フルスコープ

**作成日**: 2025-12-29
**目的**: 「やりたいこと全部」を可視化し、リソース感を把握する

---

## 1. 機能マトリクス

| 機能 | Ableton (OSC) | Ableton (MIDI) | Pro Tools (SDK) |
|------|---------------|----------------|-----------------|
| トラックVol/Pan | ✅ 実装済 | - | 🔜 |
| エフェクトパラメータ | ✅ 実装済 | - | 🔜 |
| インストゥルメントパラメータ | ⚠️ 制限あり | - | 🔜 |
| ノート（音程・長さ） | ❌ | 🔜 | 🔜 |
| ベロシティ | ❌ | 🔜 | 🔜 |
| CC（モジュレーション等） | ❌ | 🔜 | 🔜 |
| ペダル（サステイン等） | ❌ | 🔜 | 🔜 |
| ピッチベンド | ❌ | 🔜 | 🔜 |

---

## 2. 実装フェーズ

### Phase 1: OSC版 ✅ 完了
**スコープ**: ミキシング・音作りのログ

| 項目 | 状態 | 工数 |
|-----|------|------|
| AbletonOSC連携 | ✅ | 済 |
| ポーリング検出 | ✅ | 済 |
| メニューバーアプリ | ✅ | 済 |
| API送信（未実装） | 🔜 | 1-2日 |

### Phase 2: MIDI版
**スコープ**: 演奏内容のログ

| 項目 | 複雑度 | 工数目安 |
|-----|--------|---------|
| CoreMIDI受信 | 中 | 2-3日 |
| IAC Driver設定ガイド | 低 | 0.5日 |
| ノート/CC/ペダル解析 | 中 | 2-3日 |
| ログ量最適化（後述） | 高 | 3-5日 |
| UI統合 | 低 | 1日 |
| **小計** | | **8-12日** |

### Phase 3: Pro Tools SDK
**スコープ**: Pro Tools対応

| 項目 | 複雑度 | 工数目安 |
|-----|--------|---------|
| SDK調査・ライセンス | 高 | 2-3日 |
| C++/Swift Bridge | 高 | 5-7日 |
| パラメータ取得 | 中 | 3-5日 |
| MIDI取得 | 中 | 2-3日 |
| テスト・安定化 | 高 | 5-7日 |
| **小計** | | **17-25日** |

---

## 3. MIDIログ量問題

### 試算

| シナリオ | 1分あたり | 1時間セッション |
|---------|----------|-----------------|
| ゆっくり練習 | 60-120ノート | 3,600-7,200件 |
| 通常演奏 | 200-400ノート | 12,000-24,000件 |
| 速いパッセージ | 600-1000ノート | 36,000-60,000件 |
| + CC/ペダル | x1.5-2倍 | 最大120,000件 |

### 対策案

| 対策 | 効果 | 複雑度 |
|-----|------|--------|
| **サンプリング** | CC を 50ms間隔に間引き | 低 |
| **デルタ記録** | 変化時のみ記録 | 中 |
| **セクション単位集約** | 8小節ごとにサマリ化 | 高 |
| **録音中のみ取得** | Ableton録音状態を監視 | 中 |
| **ユーザー選択** | 取得対象を設定で選択 | 低 |

**推奨**:
1. CCはデルタ記録 + 50msサンプリング
2. ノートは全取得（演奏内容は落としたくない）
3. 設定で「MIDIログ有効/無効」切替

---

## 4. アーキテクチャ比較

### 現状: OSCのみ
```
Ableton ─OSC→ MUEDnote Hub ─HTTP→ MUED API
```

### Phase 2: OSC + MIDI
```
Ableton ─OSC→ MUEDnote Hub ─HTTP→ MUED API
    │                │
    └─MIDI→ IAC ─────┘
```

### Phase 3: + Pro Tools
```
Ableton ──OSC──→ ┐
         MIDI──→ ├─ MUEDnote Hub ─HTTP→ MUED API
Pro Tools ─SDK─→ ┘
```

---

## 5. リソースサマリ

| フェーズ | 工数 | 累計 | 提供価値 |
|---------|------|------|---------|
| Phase 1 (OSC) | 済 | - | ミキシングログ |
| Phase 2 (MIDI) | 8-12日 | 8-12日 | 演奏ログ |
| Phase 3 (Pro Tools) | 17-25日 | 25-37日 | Pro Tools対応 |

---

## 6. 推奨リリース戦略

### Option A: 段階リリース（推奨）
1. **v1.0**: OSC版（ミキシング特化）
2. **v1.1**: MIDI追加（演奏ログ）
3. **v2.0**: Pro Tools対応

### Option B: MIDI込みでv1
1. **v1.0**: OSC + MIDI
2. **v2.0**: Pro Tools対応

### Option C: フル機能v1
1. **v1.0**: OSC + MIDI + Pro Tools
   - リスク高、市場投入遅延

---

## 7. 未解決事項

| 項目 | 検討ポイント |
|-----|-------------|
| ログ保持期間 | 1ヶ月？3ヶ月？容量課金？ |
| オフライン対応 | ネット断時のローカルキュー |
| マルチトラックMIDI | トラック別にMIDI取得？ |
| 既存MIDI機器 | コントローラーからの入力も取得？ |

---

## 変更履歴

| 日付 | 変更内容 |
|-----|---------|
| 2025-12-29 | 初版作成 |
