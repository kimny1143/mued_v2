# OpenAI ABC Generation 機能ガイド

**最終更新:** 2025-11-12
**対象:** 教師・コンテンツ作成者
**ステータス:** ✅ 本番環境リリース済み

---

## 1. 機能概要

### ABC Notation とは

ABC notation は、音楽を**テキスト形式**で表現する記譜法です。シンプルな文字列で楽譜を記述でき、以下のような特徴があります：

**例: ハ長調のスケール**
```abc
X:1
T:C Major Scale
M:4/4
L:1/4
K:C
C D E F | G A B c |
```

**ABC notation の利点:**
- ✅ テキストエディタで編集可能
- ✅ 楽譜への自動変換
- ✅ MIDI ファイルへの変換
- ✅ ブラウザ内での再生

### MUED での実装

MUED LMS では、OpenAI GPT-5-mini モデルを使用して、教育目的に最適化された ABC notation を自動生成します。

**生成フロー:**
```
教師の指示 → OpenAI GPT-5-mini → ABC notation → 楽譜 + MIDI
```

### 対応楽器・ジャンル

#### 対応楽器

| 楽器 | 記譜法 | 対応レベル |
|------|--------|-----------|
| **ピアノ** | 二段譜（右手・左手） | 初級〜上級 |
| **ギター** | タブ譜 + 標準譜 | 初級〜上級 |
| **バイオリン** | ト音記号 | 初級〜上級 |
| **フルート** | ト音記号 | 初級〜中級 |
| **クラリネット** | ト音記号（移調楽器） | 初級〜中級 |
| **トランペット** | ト音記号（移調楽器） | 初級〜中級 |

**今後追加予定:**
- ドラム（リズム譜）
- ベース（ヘ音記号 + タブ譜）
- サックス（移調楽器）

#### 対応ジャンル

- **クラシック** - バッハ、モーツァルト風の練習曲
- **ジャズ** - スイング、ボサノバ、ブルース
- **ポップ** - コード進行中心の現代曲
- **フォーク** - シンプルなメロディライン
- **ロック** - リフ中心の練習曲
- **伝統音楽** - 童謡、民謡

### 生成可能な教材タイプ

1. **スケール練習**
   - メジャー・マイナースケール
   - ペンタトニックスケール
   - モード（ドリアン、リディアン等）

2. **アルペジオ練習**
   - トライアド（三和音）
   - セブンスコード
   - 分散和音パターン

3. **リズム練習**
   - 拍子記号別（4/4, 3/4, 6/8等）
   - シンコペーション
   - ポリリズム

4. **楽曲形式**
   - ABA 形式
   - ロンド形式
   - 12小節ブルース

5. **技巧練習**
   - トリル、装飾音
   - スタッカート、レガート
   - ダイナミクス（強弱）

---

## 2. ユーザー向け使用方法

### 2.1 教材生成フロー

#### Step 1: 教材作成ページにアクセス

1. MUED LMS にログイン
2. ダッシュボード → **「教材」** タブ
3. **「新しい教材を作成」** ボタンをクリック
4. **「ABC Notation で作成」** を選択

#### Step 2: レベル選択

**初級（Beginner）**
- 対象: 楽器を始めて 0〜6ヶ月
- 難易度: 単音メロディ、基本リズム
- 音域: 1オクターブ以内
- テンポ: ゆっくり（60-80 BPM）

**中級（Intermediate）**
- 対象: 楽器歴 6ヶ月〜2年
- 難易度: 和音、複雑なリズム
- 音域: 2オクターブ
- テンポ: 中程度（80-120 BPM）

**上級（Advanced）**
- 対象: 楽器歴 2年以上
- 難易度: 技巧的パッセージ
- 音域: 3オクターブ以上
- テンポ: 速い（120-160 BPM）

#### Step 3: 楽器・ジャンル選択

**楽器選択のポイント:**
- 生徒の主楽器を選択
- 複数楽器対応の場合は「任意」を選択可能

**ジャンル選択のポイント:**
- 生徒の好みを考慮
- レベルに応じた適切なジャンル選択
  - 初級: フォーク、伝統音楽
  - 中級: クラシック、ポップ
  - 上級: ジャズ、ロック

#### Step 4: カスタムリクエスト入力

**効果的なリクエスト例:**

✅ **良い例:**
```
Dメジャーの3度音程練習曲を作成してください。
テンポは60から徐々に上げる練習ができるようにしてください。
8小節×2パートで、繰り返し記号を使用してください。
```

✅ **良い例:**
```
初心者向けのギターアルペジオ練習曲。
コード進行: C → Am → F → G
6/8拍子で、優しいメロディライン。
```

❌ **避けるべき例:**
```
いい感じの曲
```
（具体性が不足）

❌ **避けるべき例:**
```
ショパンのエチュードみたいなやつで、超難しくて、
転調しまくりで、ポリリズムで...
```
（複雑すぎて初心者には不適切）

#### Step 5: 生成実行

1. **「生成」** ボタンをクリック
2. 生成中（通常 2-5秒）
3. プレビューで確認
4. **「保存」** または **「再生成」**

### 2.2 生成結果の活用

#### ABC Notation の読み方

**基本構造:**
```abc
X:1              ← 曲番号
T:春の小川       ← タイトル
M:4/4            ← 拍子記号（4分の4拍子）
L:1/8            ← デフォルト音符長（8分音符）
K:C              ← 調号（ハ長調）
"C"C2 D2 E2 F2 | "G"G4 G4 |   ← 楽譜本体
```

**音符の表記:**
- `C D E F G A B c` - ド、レ、ミ、ファ、ソ、ラ、シ、高いド
- `C,` - 低いド（オクターブ下）
- `c'` - 高いド（オクターブ上）
- `C2` - 2倍の長さ（4分音符 = 8分音符×2）
- `C/2` - 半分の長さ（16分音符）

**リズム記号:**
- `|` - 小節線
- `||` - 終止線
- `|:` と `:|` - 繰り返し記号
- `[1` と `[2` - 1番カッコ、2番カッコ

**和音:**
- `"C"` - コードシンボル（C メジャー）
- `[CEG]` - 和音（ド・ミ・ソの同時発音）

#### MIDI 再生

**ブラウザ内再生:**
1. 生成結果ページで **「再生」** ボタン
2. テンポ調整（50% 〜 150%）
3. ループ再生のオン/オフ

**再生コントロール:**
- ⏯️ 再生/一時停止
- ⏹️ 停止
- 🔁 ループ
- 🎚️ テンポ調整スライダー

#### MIDI ダウンロード

1. **「MIDI ダウンロード」** ボタンをクリック
2. ファイル名: `{教材タイトル}.mid`
3. DAW（Cubase, Logic Pro等）で開いて編集可能

**MIDI ファイルの活用:**
- 🎹 DAW での編集・アレンジ
- 🎼 楽譜作成ソフト（Finale, Sibelius）でのインポート
- 📱 練習アプリでの再生

#### 楽譜印刷オプション

**現在の対応:**
- ブラウザの印刷機能で PDF 出力可能
- レスポンシブ表示（用紙サイズに自動調整）

**今後の機能追加予定:**
- PDF 直接エクスポート
- MusicXML 形式での出力
- 複数ページ楽譜の自動レイアウト

---

## 3. 教育的活用方法

### 段階的練習プラン

#### Week 1-2: 基礎習得
1. **MIDI 再生で聴く**（テンポ 50%）
   - メロディラインを耳で覚える
   - リズムパターンを把握
2. **片手/片方ずつ練習**
   - ピアノ: 右手のみ → 左手のみ
   - ギター: メロディ → コード伴奏
3. **ゆっくりテンポで通し**（60-70 BPM）

#### Week 3-4: 精度向上
1. **小節単位での反復練習**
   - 難しい箇所を特定
   - 10回連続成功を目標
2. **テンポアップ**（80-90 BPM）
3. **表現の追加**
   - ダイナミクス（強弱）
   - アーティキュレーション（スタッカート等）

#### Week 5-6: 完成度向上
1. **目標テンポで練習**（100-120 BPM）
2. **録音して自己評価**
   - スマホで録音
   - 改善点をメモ
3. **人前演奏**
   - 教師への演奏
   - クラスメイトへの発表

### 練習ポイントの理解

各教材には **「学習ポイント」** が自動生成されます：

**例: Dメジャーアルペジオ練習曲**
```
【学習ポイント】
1. Dメジャーのアルペジオパターン（D-F#-A）を習得
2. 6/8拍子のリズム感を養う
3. 指の独立性を高める
4. 滑らかなフィンガリングを意識

【練習のコツ】
- まず各コードの形を確認し、ゆっくりと押さえる練習
- コードチェンジに30秒以上かけても構いません
- テンポ60（ゆっくり）→ 80 → 100 → 120と段階的に
- 録音して自分の演奏を聴き返すと改善点が見つかります
```

### 効果的な活用例

#### ケーススタディ1: ピアノ初心者（8歳）

**目標:** ハ長調スケールの習得

**教材:**
- レベル: 初級
- 楽器: ピアノ
- ジャンル: クラシック
- リクエスト: "ハ長調の5指練習曲、右手のみ"

**練習計画:**
1. Week 1: MIDI 再生で耳コピ
2. Week 2: 片手ずつ（テンポ 50%）
3. Week 3: 両手でゆっくり（テンポ 70%）
4. Week 4: 目標テンポ（80 BPM）で発表

**結果:** 4週間で習得、次のレベルへ進級

#### ケーススタディ2: ギター中級者（25歳）

**目標:** ジャズコード進行の理解

**教材:**
- レベル: 中級
- 楽器: ギター
- ジャンル: ジャズ
- リクエスト: "II-V-I進行、ボサノバリズム"

**練習計画:**
1. コード進行の理論学習（Dm7 → G7 → CM7）
2. ボサノバリズムパターンの習得
3. MIDI 再生と合わせて練習
4. 自分でアレンジを加える

**結果:** 2週間でマスター、他の曲にも応用

#### ケーススタディ3: バイオリン上級者（18歳）

**目標:** 音楽大学入試対策

**教材:**
- レベル: 上級
- 楽器: バイオリン
- ジャンル: クラシック
- リクエスト: "3オクターブスケール、16分音符"

**練習計画:**
1. 音階の正確性（音程チェック）
2. 速度向上（メトロノームで段階的に）
3. ビブラート、ボウイング技術
4. 音楽性の追求

**結果:** 入試で見事合格

---

## 4. トラブルシューティング

### よくある質問

#### Q1: 生成に時間がかかる（5秒以上）

**A:** 以下を確認してください：
- インターネット接続が安定しているか
- リクエストが複雑すぎないか（シンプルに）
- ブラウザのキャッシュをクリア

**対処法:**
1. ページをリロード
2. リクエストを簡潔にする
3. 時間帯を変える（ピーク時を避ける）

#### Q2: 生成された楽譜が難しすぎる/簡単すぎる

**A:** レベル選択とリクエストを調整してください。

**難しすぎる場合:**
- レベルを「初級」に変更
- リクエストに「シンプルな」「ゆっくりとした」を追加
- 音域を限定（例: "1オクターブ以内"）

**簡単すぎる場合:**
- レベルを「中級」または「上級」に
- リクエストに「技巧的な」「複雑な」を追加
- 「転調を含む」「シンコペーション」等を指定

#### Q3: ABC notation が正しく表示されない

**A:** 以下を確認：
- 生成された ABC notation に構文エラーがないか
- ブラウザが最新版か（Chrome, Firefox, Safari 推奨）
- JavaScript が有効になっているか

**対処法:**
1. 「再生成」ボタンで再度生成
2. ブラウザを再起動
3. 別のブラウザで試す

#### Q4: MIDI 再生ができない

**A:** ブラウザの音声設定を確認してください。

**チェックリスト:**
- [ ] ブラウザの音量がミュートになっていないか
- [ ] システムの音量設定
- [ ] Web Audio API が有効か（最新ブラウザ推奨）
- [ ] 他のタブで音声が再生中でないか

#### Q5: ダウンロードした MIDI ファイルが開けない

**A:** MIDI 対応ソフトウェアが必要です。

**推奨ソフトウェア:**
- **Windows:** Windows Media Player, GarageBand
- **Mac:** GarageBand, Logic Pro
- **DAW:** Cubase, Ableton Live, FL Studio
- **楽譜ソフト:** Finale, Sibelius, MuseScore（無料）

### エラー対処法

#### エラー: "生成に失敗しました"

**原因:**
- OpenAI API の一時的な障害
- リクエストが不適切

**対処法:**
1. 数分待ってから再試行
2. リクエストを変更（より具体的に）
3. レベルや楽器を変更して試す

#### エラー: "ABC notation の構文エラー"

**原因:**
- 稀に生成された ABC notation に誤りがある

**対処法:**
1. 「再生成」ボタンで再度生成
2. 手動で ABC notation を修正（上級者のみ）
3. サポートに報告

#### エラー: "認証エラー"

**原因:**
- ログインセッションが切れた
- 権限不足

**対処法:**
1. 再ログイン
2. ブラウザのクッキーを確認
3. 管理者に権限を確認

### サポート窓口

**技術サポート:**
- Email: support@mued.jp
- 対応時間: 平日 10:00-18:00 (JST)
- 返信目安: 24時間以内

**教育相談:**
- Email: teacher-support@mued.jp
- 対応時間: 平日 9:00-20:00 (JST)

**緊急時（システム障害）:**
- 電話: 03-XXXX-XXXX
- 対応時間: 24時間365日

**コミュニティフォーラム:**
- URL: https://community.mued.jp
- ユーザー同士で質問・回答
- 教材シェア機能

---

## 5. 今後の拡張予定

### 追加予定の楽器

**Phase 3（2025年Q1）:**
- ドラム（リズム譜）
- ベース（ヘ音記号 + タブ譜）
- ウクレレ（コード譜）

**Phase 4（2025年Q2）:**
- サックス（アルト、テナー）
- ホルン（移調楽器）
- チェロ（ヘ音記号）

### 新機能ロードマップ

#### 2025年 Q1
- [ ] **PDF 直接エクスポート**
  - 高品質な楽譜 PDF
  - レイアウト自動調整
- [ ] **MusicXML 対応**
  - Finale, Sibelius へのインポート
- [ ] **アレンジ提案機能**
  - 生成された曲の自動アレンジ
  - レベル変更（簡易版 ↔ 高度版）

#### 2025年 Q2
- [ ] **コラボレーション機能**
  - 教師と生徒の共同編集
  - コメント機能
- [ ] **練習記録連携**
  - 練習時間の自動記録
  - 進捗グラフ表示
- [ ] **AI 演奏評価**
  - 録音した演奏を自動採点
  - 改善点のフィードバック

#### 2025年 Q3
- [ ] **カスタムスタイル**
  - 作曲家スタイル選択（バッハ風、モーツァルト風）
  - オリジナルスタイルの学習
- [ ] **多楽器アンサンブル**
  - ピアノ + バイオリンの二重奏
  - 四重奏、五重奏の自動生成

#### 2025年 Q4
- [ ] **音声入力対応**
  - 鼻歌から楽譜生成
  - 録音した演奏の採譜
- [ ] **VR/AR 統合**
  - 3D 楽譜表示
  - 仮想演奏環境

### フィードバックのお願い

この機能は継続的に改善しています。以下の情報をお寄せください：

**フィードバックフォーム:**
https://forms.mued.jp/abc-generation-feedback

**共有していただきたい情報:**
- 使用した楽器・レベル・ジャンル
- 生成された教材の品質（1-5点）
- 改善してほしい点
- 追加してほしい機能

---

## 関連ドキュメント

- [OpenAI ABC Generation 技術詳細](/docs/development/openai-abc-technical-guide.md)（開発者向け）
- [ABC Notation 完全ガイド](http://abcnotation.com/)（外部リンク）
- [MUED LMS ユーザーマニュアル](/docs/user-manual.md)
- [教材作成ベストプラクティス](/docs/guides/material-creation-best-practices.md)

---

**免責事項:**
生成された教材は教育目的のために提供されており、著作権フリーです。ただし、商用利用する場合は事前に MUED サポートにご相談ください。

**プライバシーポリシー:**
生成リクエストのデータは品質改善のために匿名化して収集されます。個人情報は一切含まれません。

---

*最終更新: 2025-11-12*
*バージョン: 1.0*
*ステータス: ✅ 公開済み*
